{% extends 'advisor_management/base.html' %} {% block title %}Reset Password -
EduTrack{% endblock %} {% block content %}
<div class="card">
  <h2>ğŸ”‘ Reset Advisor Password</h2>

  <p>Set a new password for the following advisor:</p>

  <div
    style="
      background: #f8f9fa;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    "
  >
    <strong>ğŸ‘¤ Name:</strong> {{ advisor.first_name }} {{ advisor.last_name
    }}<br />
    <strong>ğŸ“§ Email:</strong> {{ advisor.email }}
  </div>

  <form method="post">
    {% csrf_token %}

    <div class="form-group">
      <label for="new_password">ğŸ” New Password:</label>
      <input
        type="password"
        id="new_password"
        name="new_password"
        required
        minlength="8"
        placeholder="Enter new password (minimum 8 characters)"
        style="
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 5px;
        "
      />
      <small style="color: #666; font-size: 0.9em">
        Password should be at least 8 characters long and contain a mix of
        letters, numbers, and symbols.
      </small>
    </div>

    <div class="form-group">
      <label for="confirm_password">ğŸ” Confirm Password:</label>
      <input
        type="password"
        id="confirm_password"
        name="confirm_password"
        required
        minlength="8"
        placeholder="Confirm new password"
        style="
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 5px;
        "
      />
    </div>

    <div
      style="
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
      "
    >
      <strong>âš ï¸ Security Note:</strong> Make sure to use a strong password and
      share it securely with the advisor.
    </div>

    <div style="margin-top: 20px">
      <button type="submit" class="btn btn-warning">ğŸ”‘ Reset Password</button>

      <button
        type="button"
        onclick="generatePassword()"
        class="btn"
        style="background: #17a2b8; color: white; margin-left: 10px"
      >
        ğŸ² Generate Secure Password
      </button>

      <a
        href="{% url 'advisor_list' %}"
        class="btn"
        style="background: #6c757d; color: white; margin-left: 10px"
        >âŒ Cancel</a
      >
    </div>
  </form>
</div>

<script>
  function generatePassword() {
    const length = 12;
    const charset =
      "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";
    let password = "";

    // Ensure at least one character from each category
    const lowercase = "abcdefghijklmnopqrstuvwxyz";
    const uppercase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const numbers = "0123456789";
    const symbols = "!@#$%^&*";

    password += lowercase[Math.floor(Math.random() * lowercase.length)];
    password += uppercase[Math.floor(Math.random() * uppercase.length)];
    password += numbers[Math.floor(Math.random() * numbers.length)];
    password += symbols[Math.floor(Math.random() * symbols.length)];

    // Fill the rest randomly
    for (let i = 4; i < length; i++) {
      password += charset[Math.floor(Math.random() * charset.length)];
    }

    // Shuffle the password
    password = password
      .split("")
      .sort(() => Math.random() - 0.5)
      .join("");

    // Set both password fields
    document.getElementById("new_password").value = password;
    document.getElementById("confirm_password").value = password;

    // Show the generated password
    alert(
      "Generated password: " +
        password +
        "\n\nPlease copy this password and share it securely with the advisor."
    );
  }
</script>

{% endblock %}
